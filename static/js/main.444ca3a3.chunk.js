(this["webpackJsonpminazuki-bbs"]=this["webpackJsonpminazuki-bbs"]||[]).push([[2],{10:function(e,t,n){"use strict";n.d(t,"g",(function(){return a})),n.d(t,"d",(function(){return r})),n.d(t,"f",(function(){return c})),n.d(t,"c",(function(){return o})),n.d(t,"h",(function(){return u})),n.d(t,"e",(function(){return i})),n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return l}));var a="/",r="/login",c="/register",o="/category/:cateId",u="/user/:uid/",i="/user/",s=function(e){return"/category/".concat(e)},l="/"},119:function(e,t,n){"use strict";var a=n(0),r=n.n(a),c=(n(244),Object(a.memo)((function(e){var t,n,a=null!==(t=e.className)&&void 0!==t?t:"",c=null!==(n=e.style)&&void 0!==n?n:{};return r.a.createElement("div",{id:"comp-card",className:a,style:c},e.children)})));t.a=c},123:function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return d}));var a=n(79),r=n(368),c=n(0),o=n.n(c),u=n(119),i=n(186),s=[o.a.createElement(a.a,null,"\u6e38\u5ba2"),o.a.createElement(a.a,{color:"green"},"\u7528\u6237"),o.a.createElement(a.a,{color:"red"},"\u7248\u4e3b"),o.a.createElement(a.a,{color:"geekblue"},"\u7ba1\u7406\u5458"),o.a.createElement(a.a,{color:"gold"},"\u5f00\u53d1\u8005")],l=(u.a,i.a,o.a.createElement(i.a,{style:{fontSize:"72px"},spin:!0})),d=o.a.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",width:"100%",height:"100vh"}},o.a.createElement(r.a,{indicator:l}))},124:function(e,t,n){"use strict";var a=n(0),r=n.n(a),c=(n(363),Object(a.memo)((function(e){var t;return r.a.createElement("div",{id:"comp-bg-img",className:"".concat(e.className),style:{backgroundImage:"url(".concat(e.src,")"),zIndex:null!==(t=e.zIndex)&&void 0!==t?t:0}})})));t.a=c},132:function(e,t,n){"use strict";n.d(t,"a",(function(){return N}));var a=n(0),r=n.n(a),c=(n(236),n(22)),o=(n(237),n(89)),u=n.n(o),i=n(10),s=n(370),l=n(375),d=n(384),m=n(184),f=n(381),p=n(186),v=n(382),E=n(7),h=Object(v.a)({scriptUrl:E.i}),b=(n(240),n(369)),g=n(15),O=(n(242),n(383)),x=Object(a.memo)((function(e){var t,n,a,c,o=null!==(t=e.className)&&void 0!==t?t:"",u="size-".concat(null!==(n=e.size)&&void 0!==n?n:"M"),i=null!==(a=e.msg)&&void 0!==a?a:0,s=null!==(c=e.onClick)&&void 0!==c?c:function(){};return r.a.createElement("div",{id:"comp-icon-item",className:o,onClick:s},r.a.createElement("div",{className:"container ".concat(u)},r.a.createElement(O.a,{count:i},r.a.createElement(h,{type:e.type,className:"icon"})),r.a.createElement("div",{className:"title"},e.title)))})),w=(n(243),Object(a.memo)((function(e){var t,n,a,c,o,u,i=null!==(t=e.className)&&void 0!==t?t:"",s="size-".concat(null!==(n=e.size)&&void 0!==n?n:"M"),l=null!==(a=e.onClick)&&void 0!==a?a:function(){},d=(null!==(c=e.key===e.href)&&void 0!==c?c:"")||null!==(o=e.selected)&&void 0!==o&&o,m=null!==(u=e.style)&&void 0!==u?u:{};return r.a.createElement("div",{id:"comp-list-item",className:i,onClick:l,style:m},r.a.createElement("div",{className:"container ".concat(s," ").concat(d?" selected":"")},e.type&&r.a.createElement(h,{type:e.type,className:"icon"}),r.a.createElement("div",{className:"label"},e.label)))}))),y=n(123),T=Object(a.memo)((function(e){var t,n,a=e.className,o=e.store,u=e.cb,l=Object(c.g)(),d=o.info,m=o.manageCate,f=o.inbox,p=Object(g.e)(d,m);return r.a.createElement("div",{id:"comp-user-info-card",className:null!==a&&void 0!==a?a:""},r.a.createElement("div",{className:"container"},r.a.createElement(b.a,{src:null!==(t=d.avatar)&&void 0!==t?t:E.e,size:64,className:"avatar"}),r.a.createElement("div",{className:"nickname"},null!==(n=d.nickname)&&void 0!==n?n:"\u6e38\u5ba2"),r.a.createElement("div",{className:"username"},"\u7528\u6237\u540d\uff1a ".concat(d.username)),r.a.createElement("div",{className:"group"},y.b[p]),!!p&&r.a.createElement("div",{className:"entries"},r.a.createElement(x,{type:"if-inbox",title:"\u79c1\u4fe1",className:"item",msg:f,onClick:function(){return l.push("/user/#/message")}}),r.a.createElement(x,{type:"if-todo",title:"\u5f85\u5904\u7406",className:"item",msg:0,onClick:function(){return s.a.info("\u8fd9\u9879\u529f\u80fd\u4e0d\u786e\u5b9a\u662f\u5426\u5b58\u5728\u2026\u2026")}})),p?r.a.createElement("div",{className:"menu"},r.a.createElement(w,{label:"\u4e2a\u4eba\u4e2d\u5fc3",type:"if-home",onClick:function(){l.push(i.e)}}),r.a.createElement(w,{label:"\u7ba1\u7406\u4e2d\u5fc3",type:"if-center",onClick:function(){}}),r.a.createElement(w,{label:"\u9000\u51fa\u767b\u5f55",type:"if-exit",onClick:u.logout})):r.a.createElement("div",{className:"menu",style:{margin:"8px 0 0 0"}},r.a.createElement(w,{label:"\u767b\u5f55",type:"if-step",onClick:function(){return l.push(i.d)}}))))})),k=Object(a.memo)((function(e){return r.a.createElement("div",{className:"comp-search-bar ".concat(e.className)},r.a.createElement(l.a.Search,{placeholder:"\u5168\u5c40\u641c\u7d22\u2026\u2026",className:"input-search",onSearch:function(e){""!==e&&s.a.info('\u5c06\u8981\u641c\u7d22 "'.concat(e,'"'))}}))})),j=Object(a.memo)((function(e){e.loggedIn;var t=e.store,n=Object(c.g)(),a={logout:function(){d.a.info({message:"\u5df2\u9000\u51fa\u767b\u5f55",description:"".concat(t.info.nickname," \u5df2\u7ecf\u6210\u529f\u9000\u51fa\u767b\u5f55\uff0c\u8fd4\u56de\u767b\u9646\u9875\u9762")}),e.logout(),n.push(i.d)}};return r.a.createElement("div",{id:"comp-top-bar"},r.a.createElement("div",{className:"container"},r.a.createElement("span",{className:"logo-title",onClick:function(){return n.push("/")}},r.a.createElement(m.a,{placement:"bottomLeft",title:E.c},r.a.createElement("img",{src:u.a,alt:"\u3044\u3044\u306d\uff01",className:"favicon"})),r.a.createElement(m.a,{placement:"bottom",title:"\u56de\u5230\u9996\u9875"},r.a.createElement("div",{className:"title"},E.c))),r.a.createElement(k,{className:"search-bar"}),r.a.createElement("div",{className:"entry-groups"},r.a.createElement(f.a,{trigger:"click",placement:"bottomRight",className:"user-card",content:r.a.createElement(T,{store:t,cb:a})},r.a.createElement(h,{type:"if-user",className:"user-entry"})),r.a.createElement("div",{className:"loading"},t.isLoading&&r.a.createElement(p.a,null)))))})),S=n(368),I=(n(294),Object(a.memo)((function(e){var t=e.className;return r.a.createElement("div",{id:"comp-footer",className:t},r.a.createElement("div",{className:"text-field"},E.c," ",E.d," @\u5f00\u53d1\u4e2d\u7248\u672c"),r.a.createElement("div",{className:"text-field"},"Project Minazuki \u6240\u5c5e"))}))),N=Object(a.createContext)({}),C=Object(a.memo)((function(e){var t={loggedIn:e.loggedIn,store:e.userInfo,logout:e.logout},n={history:e.history,match:e.match,location:e.location},c=e.loggedIn&&!e.userInfo.info._id,o=e.location.pathname+e.location.hash,u=r.a.createElement(p.a,{style:{fontSize:"72px"},spin:!0}),i=r.a.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",width:"100%",height:"100vh"}},r.a.createElement(S.a,{indicator:u}));return Object(a.useEffect)((function(){console.log(n),c&&e.reloadInfo(o,!1,"\u4e45 \u7b49 \u4e86")}),[e.loggedIn]),r.a.createElement("div",{id:"comp-page-frame"},r.a.createElement(j,t),r.a.createElement(N.Provider,{value:n},c?i:e.children),r.a.createElement(I,null))}));t.b=C},15:function(e,t,n){"use strict";n.d(t,"c",(function(){return s})),n.d(t,"e",(function(){return l})),n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return m})),n.d(t,"i",(function(){return f})),n.d(t,"d",(function(){return p})),n.d(t,"g",(function(){return v})),n.d(t,"f",(function(){return E})),n.d(t,"h",(function(){return h}));var a=n(28),r=n(9),c=(n(98),n(7));function o(e){return void 0===e?"":e.replace(/-/g,"/").replace(/T/g," ").substr(0,19)}var u=n(174),i=n.n(u);var s=function(e){return function(e){var t=0;for(var n in e)if(e.hasOwnProperty(n))switch(n){case"hasDigit":case"hasLower":case"hasUpper":t+=e[n]?1:0;break;case"hasSymbol":t+=e[n]?2:0}return t>5&&(t=5),e.hasIllegal||!e.metLength?-1:t}(function(e){return{hasDigit:/\d/.test(e),hasLower:/[a-z]/.test(e),hasUpper:/[A-Z]/.test(e),hasSymbol:/\W|_/.test(e),hasIllegal:/\n|\f|\r|\t|\v|\s/.test(e),metLength:e.length>=c.j}}(e))};function l(e,t){return void 0===e._id?0:c.h.find((function(t){return t===e.username}))?4:e.isAdmin?3:t?t.length?2:1:null===e.manageCateId?1:2}function d(e,t){var n,a=null!==(n=null!==t&&void 0!==t?t:e.manageCateId)&&void 0!==n?n:0;return void 0===e._id?0:c.h.find((function(t){return t===e.username}))?4:e.isAdmin?3:a?2:1}function m(e){return{avatar:e.coverUrl,createTime:o(e.createdAt),desc:e.description,_id:e.id,name:e.name,status:e.status,updateTime:o(e.updatedAt),visits:e.visitsCount}}function f(e){return Object(r.a)({},e,{_id:e.id,createdAt:o(e.createdAt),lastSignIn:o(e.lastSignIn),avatar:e.avatarUrl})}function p(e){var t=e.trim().toLowerCase(),n=i()(t);return"https://www.gravatar.com/avatar/".concat(n)}function v(e){return Object(r.a)({},e,{cateId:null===e||void 0===e?void 0:e.categoryId,createdTime:o(null===e||void 0===e?void 0:e.createdAt),authorId:null===e||void 0===e?void 0:e.creatorId,_id:null===e||void 0===e?void 0:e.id,latestReplyTime:o(null===e||void 0===e?void 0:e.latestReplyAt),replies:null===e||void 0===e?void 0:e.replyCount,pinned:null===e||void 0===e?void 0:e.top,visits:null===e||void 0===e?void 0:e.visitsCount})}function E(e){return Object(r.a)({},e,{_id:null===e||void 0===e?void 0:e.id,cateId:null===e||void 0===e?void 0:e.categoryId,authorId:null===e||void 0===e?void 0:e.creatorId,createTime:o(null===e||void 0===e?void 0:e.createdAt),updateTime:o(null===e||void 0===e?void 0:e.updatedAt)})}function h(e){var t,n=[],r=Object(a.a)(e);try{for(r.s();!(t=r.n()).done;){var c=t.value;-1==n.indexOf(c)&&n.push(c)}}catch(o){r.e(o)}finally{r.f()}return n}},168:function(e,t,n){e.exports=n.p+"static/media/bg-atri.cf743952.png"},181:function(e,t,n){e.exports=n.p+"static/media/bg-shiroha.1b367b7e.png"},209:function(e,t,n){e.exports=n(367)},215:function(e,t,n){},236:function(e,t,n){},237:function(e,t,n){},240:function(e,t,n){},242:function(e,t,n){},243:function(e,t,n){},244:function(e,t,n){},294:function(e,t,n){},295:function(e,t,n){},296:function(e,t,n){},362:function(e,t,n){},363:function(e,t,n){},366:function(e,t,n){},367:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(14),o=n.n(c),u=(n(214),n(215),n(98));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(u.b,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},6:function(e,t,n){"use strict";n.d(t,"h",(function(){return a})),n.d(t,"t",(function(){return r})),n.d(t,"j",(function(){return c})),n.d(t,"v",(function(){return o})),n.d(t,"m",(function(){return u})),n.d(t,"k",(function(){return i})),n.d(t,"w",(function(){return s})),n.d(t,"i",(function(){return l})),n.d(t,"u",(function(){return d})),n.d(t,"l",(function(){return m})),n.d(t,"x",(function(){return f})),n.d(t,"g",(function(){return p})),n.d(t,"s",(function(){return v})),n.d(t,"f",(function(){return E})),n.d(t,"r",(function(){return h})),n.d(t,"a",(function(){return b})),n.d(t,"n",(function(){return g})),n.d(t,"c",(function(){return O})),n.d(t,"o",(function(){return x})),n.d(t,"b",(function(){return w})),n.d(t,"d",(function(){return y})),n.d(t,"p",(function(){return T})),n.d(t,"e",(function(){return k})),n.d(t,"q",(function(){return j}));var a="FETCH_MY_INFO_START";function r(e,t,n){return{type:a,redirect:e,isFirstTime:t,title:n}}var c="LOGIN_START";function o(e,t){return{type:c,username:e,password:t}}var u="WAIT_PROCESS";var i="REGISTER_START";function s(e,t){return{type:i,form:e,cb:t}}var l="FETCH_USER_INFO_START";function d(e){return{type:l,uid:e}}var m="UPDATE_USER_INFO_START";function f(e,t){return{type:m,data:e,cb:t}}var p="FETCH_MY_INBOX_START";function v(e){return{type:p,uid:e}}var E="FETCH_MY_FAVORITE_START";function h(){return{type:E}}var b="DELETE_FAVORITE_START";function g(e){return{type:b,fid:e}}var O="FETCH_CATEGORIES_START";function x(){return{type:O}}var w="FETCH_ALL_THEMES_START";var y="FETCH_CATEGORY_DETAIL";function T(e){return{type:y,cateId:e}}var k="FETCH_HOME_PAGE_START";function j(){return{type:k}}},7:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return r})),n.d(t,"e",(function(){return c})),n.d(t,"k",(function(){return o})),n.d(t,"f",(function(){return u})),n.d(t,"l",(function(){return i})),n.d(t,"j",(function(){return s})),n.d(t,"i",(function(){return l})),n.d(t,"h",(function(){return d})),n.d(t,"c",(function(){return m})),n.d(t,"d",(function(){return f})),n.d(t,"g",(function(){return p}));var a="http://47.112.128.54:8080",r="http://localhost:1919/api",c="https://i.loli.net/2020/06/27/sUvTMuzBlVjAWDJ.jpg",o={token:"token",tokenSetTime:"tokenSetTime"},u="",i=6048e5,s=6,l=["//at.alicdn.com/t/font_1917388_w7ankqb4iga.js"],d=["shiroha"],m="Minazuki BBS",f="dev-ver. 0.3",p="\u8fd9\u4e2a\u4eba\u5f88\u61d2\uff0c\u4ec0\u4e48\u4e5f\u6ca1\u6709\u7559\u4e0b\u3002"},89:function(e,t,n){e.exports=n.p+"static/media/favicon.c536d3f1.svg"},98:function(e,t,n){"use strict";n.d(t,"a",(function(){return pn})),n.d(t,"c",(function(){return On}));var a=n(0),r=n.n(a),c=n(49),o=(n(172),n(22)),u=n(44),i=n(24),s=n(185),l=n(74),d=n.n(l),m=n(132),f=n(6),p=n(9),v=n(7);function E(e){return{type:"LOGIN",token:e}}function h(){return{type:"LOGOUT"}}function b(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return{type:"TOGGLE_USER_LOADING",on:e}}function g(e){var t={isAdmin:!1,avatar:v.e};return{type:"MY_INFO_FETCHED",data:Object(p.a)({},t,{},e)}}function O(e,t){return{type:"USER_INFO_FETCHED",id:e,data:t}}function x(e){return{type:"CATEGORIES_FETCHED",data:e}}function w(e,t,n,a,r,c){return{type:"CATEGORY_DETAILS_FETCHED",info:e,highQuality:t,pinned:n,all:a,announce:r,tags:c}}var y,T,k,j,S,I,N,C,_,A,R,D,G,F,P,L,H=Object(u.b)((function(e){var t=e.user;e.component.inProcess;return{loggedIn:!!t.token,userInfo:t}}),(function(e){return Object(i.bindActionCreators)({reloadInfo:f.t,logout:h},e)}))(m.b),M=Object(a.memo)((function(){return r.a.createElement(r.a.Fragment,null,"Loading...")})),z=n(10),U=n(51),B=(n(295),n(373)),V=n(370),Y=n(108),q=n(375),Q=n(380),J=n(379),W=n(186),X=(n(296),n(89)),$=n.n(X),Z=Object(a.memo)((function(e){var t=e.title,n=e.children,a=e.favicon,c=e.className;return r.a.createElement("div",{id:"comp-sign-card",className:c},r.a.createElement("div",{className:"bg-frame-container"},a&&r.a.createElement("img",{src:$.a,alt:"\u3044\u3044\u306d\uff01",className:"card-favicon"}),r.a.createElement("div",{className:"card-title"},t),r.a.createElement("div",null,n)))})),K=n(181),ee={input:{width:"360px"},bg:{backgroundImage:"url(".concat(n.n(K).a,")")}},te=Object(a.memo)((function(e){var t=e.handleLogin,n=e.loggedIn,a=e.isLoading,c=Object(o.g)(),u=B.a.useForm(),i=Object(U.a)(u,1)[0];return r.a.createElement("div",{id:"view-login",className:"bg-frame"},r.a.createElement("div",{className:"bg-shiroha",style:ee.bg}),r.a.createElement(Z,{title:"\u767b\u5f55",favicon:!0},!a&&n?r.a.createElement("div",{className:"logged-in-fallback"},r.a.createElement("div",{className:"text-field"},"\u4f3c\u4e4e\u60a8\u5df2\u7ecf\u767b\u9646\u6210\u529f\u4e86\u2026\u2026 \u8981\u56de\u5230\u4e3b\u9875\u5417"),r.a.createElement(Y.a,{type:"primary",shape:"round",icon:r.a.createElement(Q.a,null),size:"large",onClick:function(){c.push("/")},className:"back"},"\u56de\u5230\u4e3b\u9875")):r.a.createElement(r.a.Fragment,null,r.a.createElement(B.a,{form:i,className:"login-form",onFinish:function(e){var n=e.username,a=e.password;t(n,a)},size:"large"},r.a.createElement(B.a.Item,{name:"username",style:ee.input,required:!0},r.a.createElement(q.a,{placeholder:"\u7528\u6237\u540d"})),r.a.createElement(B.a.Item,{name:"password",style:ee.input,required:!0},r.a.createElement(q.a.Password,{placeholder:"\u5bc6\u7801"})),r.a.createElement(B.a.Item,{className:"bottom-buttons"},r.a.createElement(Y.a,{type:"text",shape:"round",onClick:function(){c.push(z.f)}},"\u6ce8\u518c\u65b0\u7528\u6237"),r.a.createElement(Y.a,{type:"primary",shape:"round",className:"main",icon:a?r.a.createElement(W.a,null):r.a.createElement(J.a,null),size:"large",htmlType:"submit"},"\u767b\u5f55"),r.a.createElement(Y.a,{type:"text",shape:"round",onClick:function(){V.a.info("\u529f\u80fd\u5f00\u53d1\u4e2d\uff0c\u8bf7\u8054\u7cfb\u7ba1\u7406\u5458\u6765\u66f4\u6539\u5bc6\u7801")}},"\u5fd8\u8bb0\u5bc6\u7801\uff1f"))))))})),ne=Object(u.b)((function(e){var t=e.user;return{loggedIn:!!t.token,isLoading:t.isLoading}}),(function(e){return Object(i.bindActionCreators)({handleLogin:f.v},e)}))(te),ae=(n(362),n(374)),re=n(378),ce=n(377),oe=n(376),ue=n(124),ie=n(168),se=n.n(ie),le=n(15),de=Object(a.memo)((function(e){var t=e.step,n=e.alia,c=Object(a.useState)(0),o=Object(U.a)(c,2),u=o[0],i=o[1],s=["","\u5f31","\u8f83\u5f31","\u4e2d\u7b49","\u8f83\u5f3a","\u5f3a"];return t<=0?r.a.createElement(r.a.Fragment,null,r.a.createElement(B.a.Item,{name:"username",className:"input-item",rules:[{required:!0,message:"\u7528\u6237\u540d\u4e0d\u80fd\u4e3a\u7a7a"},{pattern:/^[a-z0-9A-Z_]+$/,message:"\u7528\u6237\u540d\u4ec5\u53ef\u5305\u542b\u5b57\u6bcd\u3001\u6570\u5b57\u4ee5\u53ca\u4e0b\u5212\u7ebf"},{pattern:/^[a-zA-Z].*$/,message:"\u7528\u6237\u540d\u7684\u7b2c\u4e00\u4e2a\u5b57\u7b26\u5fc5\u987b\u662f\u5b57\u6bcd"}]},r.a.createElement(q.a,{placeholder:"\u7528\u6237\u540d"})),r.a.createElement(B.a.Item,{name:"password",className:"input-item",rules:[{required:!0,message:"\u65b0\u5bc6\u7801\u4e0d\u80fd\u4e3a\u7a7a"},{type:"string",min:v.j,message:"\u5bc6\u7801\u957f\u5ea6\u4e0d\u80fd\u5c0f\u4e8e ".concat(v.j," \u4f4d")}]},r.a.createElement(q.a.Password,{placeholder:"\u65b0\u5bc6\u7801",onChange:function(e){var t=e.target.value,n=Object(le.c)(t);i(n<0?0:n)}})),r.a.createElement(B.a.Item,{name:"passwordConfirm",className:"input-item",rules:[{required:!0,message:"\u8bf7\u786e\u8ba4\u60a8\u7684\u5bc6\u7801"},function(e){var t=e.getFieldValue;return{validator:function(e,n){return n&&t("password")!==n?Promise.reject("\u4e24\u6b21\u8f93\u5165\u7684\u5bc6\u7801\u4e0d\u5339\u914d\uff0c\u8bf7\u91cd\u8bd5\uff01"):Promise.resolve()}}}]},r.a.createElement(q.a.Password,{placeholder:"\u786e\u8ba4\u5bc6\u7801"})),r.a.createElement(B.a.Item,null,r.a.createElement("div",{className:"pwd-strength"},r.a.createElement("div",{className:"label"},"\u5bc6\u7801\u5f3a\u5ea6\uff1a"),r.a.createElement(ae.a,{type:"line",steps:5,percent:20*u,className:"progress",strokeWidth:14,format:function(e){var t=(null!==e&&void 0!==e?e:0)/20;return r.a.createElement("div",{style:{color:"black"}}," ",s[Math.ceil(t)])},strokeColor:["","red","orange","","","#73CF46"][u],size:"small"})))):1===t?r.a.createElement(r.a.Fragment,null,r.a.createElement(B.a.Item,{name:"phone",className:"input-item",rules:[{required:!0,message:"\u7535\u8bdd\u53f7\u7801\u4e0d\u80fd\u4e3a\u7a7a\uff01"}]},r.a.createElement(q.a,{placeholder:"\u79fb\u52a8\u7535\u8bdd\u53f7\u7801"})),r.a.createElement(B.a.Item,{name:"email",className:"input-item",rules:[{type:"email",message:"\u8bf7\u8f93\u5165\u5408\u6cd5\u7684\u7535\u5b50\u90ae\u4ef6\u5730\u5740\uff01"},{required:!0,message:"\u7535\u5b50\u90ae\u4ef6\u5730\u5740\u4e0d\u80fd\u4e3a\u7a7a\uff01"}]},r.a.createElement(q.a,{placeholder:"\u7535\u5b50\u90ae\u7bb1\u5730\u5740"}))):r.a.createElement("div",{className:"success-form"},r.a.createElement(re.a,{className:"success-icon"}),r.a.createElement("div",{className:"success-title"},"\u6ce8\u518c\u6210\u529f"),r.a.createElement("div",{className:"success-content"},n,"\uff0c\u6b22\u8fce\u60a8\u7684\u52a0\u5165\uff01"))})),me=Object(a.memo)((function(e){var t=e.tryRegister,n=e.waiting,c=B.a.useForm(),u=Object(U.a)(c,1)[0],i=Object(a.useState)(0),s=Object(U.a)(i,2),l=s[0],d=s[1],m=Object(o.g)(),f=function(){return l+1===3},p=function(e){console.log("\u672c\u6b21\u7684\u6ce8\u518c\u4fe1\u606f",e),t(e,(function(){return d(l+1)}))};return r.a.createElement("div",{id:"view-register",className:"bg-frame"},r.a.createElement(ue.a,{src:se.a}),r.a.createElement(Z,{title:"\u6ce8\u518c",favicon:!1},r.a.createElement("div",{className:"guide"},["\u9996\u5148\uff0c\u8bf7\u8bbe\u7f6e\u60a8\u7684\u8d26\u6237\u7684\u57fa\u672c\u4fe1\u606f~","\u73b0\u5728\uff0c\u518d\u6dfb\u52a0\u4e00\u4e9b\u8054\u7cfb\u65b9\u5f0f~",""][l]),r.a.createElement("div",{className:"form"},r.a.createElement(B.a,{form:u,size:"large",onFinish:function(e){if(f())m.push(z.d);else switch(l){case 1:var t={username:u.getFieldValue("username"),password:u.getFieldValue("password"),phoneNumber:u.getFieldValue("phone"),email:u.getFieldValue("email"),nickname:u.getFieldValue("username")};p(t);break;default:d(l+1)}},onFinishFailed:function(){return V.a.warn("\u8bf7\u68c0\u67e5\u8868\u5355\u5185\u5bb9\u5408\u6cd5\u6027\uff01")}},r.a.createElement(de,{step:l,alia:u.getFieldValue("username")}))),r.a.createElement("div",{className:"navigator"},r.a.createElement(Y.a,{title:"",type:"text",shape:"round",size:"large",disabled:f(),onClick:function(){l<=0?m.push(z.d):d(l-1)},className:"nav-button"},r.a.createElement(ce.a,null),l?"\u4e0a\u4e00\u6b65":"\u8fd4\u56de\u767b\u9646"),r.a.createElement("div",{className:"now-step"},"\u7b2c ".concat(l+1," \u6b65\uff0c\u5171 ").concat(3," \u6b65")),r.a.createElement(Y.a,{title:"",type:"text",shape:"round",size:"large",onClick:function(){return u.submit()},className:"nav-button"},f()?"\u73b0\u5728\u767b\u9646":"\u4e0b\u4e00\u6b65",n?r.a.createElement(W.a,null):r.a.createElement(oe.a,null)))))})),fe=Object(u.b)((function(e){return{waiting:e.component.inProcess}}),(function(e){return Object(i.bindActionCreators)({tryRegister:f.w},e)}))(me),pe=n(371),ve=n(372),Ee=n(170),he=v.a,be="".concat(he,"/user"),ge="".concat(he,"/category"),Oe="".concat(he,"/inbox"),xe="".concat(he,"/post"),we="".concat(he,"/favorite"),ye="".concat(he,"/historyViewed"),Te="".concat(he,"/theme"),ke="".concat(he,"/notice"),je=function e(t){var n=this;Object(Ee.a)(this,e),this.exec=function(){return d()(n.body)},this.body=t};(T=y||(y={})).testGetMethod=function(){return new je({method:"GET",url:"".concat(v.b,"/test/testGetMethod")})},T.fetchMyInfo=function(){return new je({method:"GET",url:"".concat(v.b,"/user/me")})},T.login=function(){return new je({method:"GET",url:"".concat(v.b,"/user/login")})},T.getUserInfo=function(e){return new je({method:"GET",url:"".concat(he,"/user/getInfo/").concat(e)})},function(e){var t,n;(n=t||(t=e.moderator||(e.moderator={}))).getByCateId=function(e){return new je({method:"GET",url:"".concat(ge,"/").concat(e,"/moderator")})},n.dismissById=function(e,t){return new je({method:"DELETE",url:"".concat(ge,"/").concat(e,"/moderator/").concat(t)})};e.getOpening=function(){return new je({method:"GET",url:"".concat(ge)})},e.getInfoById=function(e){return new je({method:"GET",url:"".concat(ge,"/").concat(e)})},e.deleteById=function(e){return new je({method:"DELETE",url:"".concat(ge,"/").concat(e)})},e.closeById=function(e){return new je({method:"GET",url:"".concat(ge,"/").concat(e,"/close")})},e.openById=function(e){return new je({method:"GET",url:"".concat(ge,"/").concat(e,"/open")})},e.getAll=function(){return new je({method:"GET",url:"".concat(ge,"/all")})},e.create=function(e){return new je({method:"POST",url:"".concat(ge,"/create"),data:e})},e.getManage=function(e){return new je({method:"GET",url:"".concat(ge,"/manage?userId=").concat(null!==e&&void 0!==e?e:"current")})},e.update=function(e){return new je({method:"POST",url:"".concat(ge,"/update"),data:Object(p.a)({name:null,description:null,coverUrl:null},e)})}}(k||(k={})),(S=j||(j={})).register=function(e){return new je({method:"POST",url:"".concat(be,"/signUp"),data:e})},S.login=function(e){return new je({method:"POST",url:"".concat(be,"/signIn"),data:e})},S.search=function(e){return new je({method:"GET",url:"".concat(be,"/search?keyword=").concat(e)})},S.getMyInfo=function(){return new je({method:"GET",url:"".concat(be,"/current")})},S.getInfoById=function(e){return new je({method:"GET",url:"".concat(be,"/").concat(e)})},S.update=function(e){return new je({method:"POST",url:"".concat(be,"/update"),data:Object(p.a)({},e,{privacyShow:e.privacyShow?1:0})})},(N=I||(I={})).all=function(e){return new je({method:"GET",url:"".concat(ke,"/").concat(e,"/all")})},N.deleteNotice=function(e){return new je({method:"DELETE",url:"".concat(ke,"/").concat(e,"/delete")})},N.getById=function(e){return new je({method:"GET",url:"".concat(ke,"/").concat(e,"/getNoticeById")})},N.creat=function(e){return new je({method:"POST",url:"".concat(ke,"/create"),data:e})},N.update=function(e){return new je({method:"POST",url:"".concat(ke,"/update"),data:e})},(_=C||(C={})).all=function(e){return new je({method:"GET",url:"".concat(Te,"/").concat(e,"/all")})},_.highQuality=function(e){return new je({method:"GET",url:"".concat(Te,"/").concat(e,"/highQuality")})},_.selectByTag=function(e){return new je({method:"GET",url:"".concat(Te,"/").concat(e,"/selectByTag")})},_.top=function(e){return new je({method:"GET",url:"".concat(Te,"/").concat(e,"/top")})},_.viewDetails=function(e){return new je({method:"GET",url:"".concat(Te,"/").concat(e)})},_.deleteTheme=function(e){return new je({method:"DELETE",url:"".concat(Te,"/").concat(e)})},_.cancelSetHighQuality=function(e){return new je({method:"GET",url:"".concat(Te,"/").concat(e,"/cancelSetHighQuality")})},_.cancelSetTop=function(e){return new je({method:"GET",url:"".concat(Te,"/").concat(e)})},_.setHighQuality=function(e){return new je({method:"GET",url:"".concat(Te,"/").concat(e,"/setHighQuality")})},_.setTop=function(e){return new je({method:"GET",url:"".concat(Te,"/").concat(e,"/setTop")})},_.create=function(e){return new je({method:"POST",url:"".concat(Te,"/create"),data:e})},_.report=function(e){return new je({method:"POST",url:"".concat(Te,"/report"),data:e})},_.search=function(e){return new je({method:"GET",url:"".concat(Te,"/search?keyword=").concat(e)})},_.tag=function(){return new je({method:"GET",url:"".concat(Te,"/tag")})},_.addTag=function(e){return new je({method:"POST",url:"".concat(Te,"/tag/add"),data:e})},_.removeTag=function(e){return new je({method:"POST",url:"".concat(Te,"/tag/remove"),data:e})},_.top10ByReplyCount=function(){return new je({method:"GET",url:"".concat(Te,"/top10/byThemeReplyCount")})},_.top10ByVisitsCount=function(){return new je({method:"GET",url:"".concat(Te,"/top10/byThemeVisitsCount")})},_.update=function(e){return new je({method:"POST",url:"".concat(Te,"/"),data:e})},function(e){e.deleteHistory=function(e){return new je({method:"DELETE",url:"".concat(ye,"/").concat(e,"/delete")})},e.getHistoryViewed=function(e){return new je({method:"GET",url:"".concat(ye,"/").concat(e,"/getHistoryViewed")})},e.myHistories=function(){return new je({method:"GET",url:"".concat(ye,"/myHistories")})}}(A||(A={})),(D=R||(R={})).deleteFavorite=function(e){return new je({method:"DELETE",url:"".concat(we,"/").concat(e,"/delete")})},D.getAndUpdate=function(e){return new je({method:"GET",url:"".concat(we,"/").concat(e,"/getAndUpdate")})},D.create=function(e){return new je({method:"POST",url:"".concat(we,"/create"),data:e})},D.myFavorite=function(){return new je({method:"GET",url:"".concat(we,"/myFavorite")})},(F=G||(G={})).viewDetails=function(e){return new je({method:"GET",url:"".concat(xe,"/").concat(e)})},F.deletePost=function(e){return new je({method:"DELETE",url:"".concat(xe,"/").concat(e)})},F.like=function(e){return new je({method:"GET",url:"".concat(xe,"/like")})},F.unlike=function(e){return new je({method:"GET",url:"".concat(xe,"/unlike")})},F.create=function(e){return new je({method:"POST",url:"".concat(xe,"/create"),data:e})},F.deleteReply=function(e){return new je({method:"DELETE",url:"".concat(xe,"/reply/").concat(e,"/delete")})},F.createReply=function(e){return new je({method:"POST",url:"".concat(xe,"/reply/create"),data:e})},F.getAllPostsUnderATheme=function(e){return new je({method:"GET",url:"".concat(xe,"/theme")})},F.update=function(e){return new je({method:"POST",url:"".concat(xe,"/"),data:e})},(L=P||(P={})).deleteInbox=function(e){return new je({method:"DELETE",url:"".concat(Oe,"/").concat(e,"/delete")})},L.get=function(e){return new je({method:"GET",url:"".concat(Oe,"/").concat(e,"/get")})},L.myInbox=function(e){return new je({method:"GET",url:"".concat(Oe,"/").concat(e,"/myInbox")})},L.countAllUnchecked=function(e){return new je({method:"GET",url:"".concat(Oe,"/").concat(e,"/myInbox/countAllUnchecked")})},L.myOutbox=function(e){return new je({method:"GET",url:"".concat(Oe,"/").concat(e,"/myOutbox")})},L.create=function(e){return new je({method:"POST",url:"".concat(Oe,"/create"),data:e})};n(366);var Se=Object(a.memo)((function(e){var t=e.fetchInfo,n=e.loggedIn,c=e.token,o=e.userInfo,u=e.setToken,i=Object(a.useState)({}),s=Object(U.a)(i,2),l=s[0],d=s[1];return r.a.createElement("div",{id:"test-app",className:"test-app-root"},r.a.createElement(pe.a,null,r.a.createElement(ve.a,{span:8,className:"xhr-test"},r.a.createElement("div",{className:"text-field"},JSON.stringify(l)),r.a.createElement(Y.a,{title:"Send a Request",onClick:function(){y.testGetMethod().exec().then((function(e){return d(e)})).catch((function(e){return console.log(e)}))},type:"primary"},"".concat(v.b,"/test/testGetMethod"))),r.a.createElement(ve.a,{span:8,className:"saga-test"},r.a.createElement("div",{className:"text-field"},JSON.stringify(o)," ",r.a.createElement("br",null),"loggedIn: ",n?"true":"false"," ",r.a.createElement("br",null),"token: ",c),r.a.createElement(Y.a,{title:"Fetch My Info",onClick:function(){return t("./testApp")}},"I'm YJSNPI !!")),r.a.createElement(ve.a,{span:8,className:"token-test"},r.a.createElement("div",{className:"text-field"},"Check console and make sure store.subscribe is working. ",r.a.createElement("br",null),"Maybe you should add a console.log first."),r.a.createElement(Y.a,{title:"Random a new token",onClick:function(){var e=1e9*Math.random();u(e.toString(16))}},"Try a new login"))))})),Ie=Object(u.b)((function(e){var t=e.user,n=t.token;return{loggedIn:!!n,token:n,isLoading:t.isLoading,userInfo:t.info}}),(function(e){return Object(i.bindActionCreators)({fetchInfo:f.t,setToken:E},e)}))(Se),Ne=Object(a.lazy)((function(){return n.e(6).then(n.bind(null,501))})),Ce=Object(a.lazy)((function(){return Promise.all([n.e(0),n.e(9),n.e(10)]).then(n.bind(null,502))})),_e=Object(a.lazy)((function(){return Promise.all([n.e(0),n.e(1),n.e(5),n.e(8)]).then(n.bind(null,499))})),Ae=Object(a.lazy)((function(){return Promise.all([n.e(0),n.e(1),n.e(11),n.e(7)]).then(n.bind(null,498))})),Re=Object(a.memo)((function(){Object(a.useEffect)((function(){return window.scrollTo(0,0)}));var e=function(e){return function(t){return r.a.createElement(H,t,r.a.createElement(a.Suspense,{fallback:r.a.createElement(M,null)},e))}};return r.a.createElement(r.a.Fragment,null,r.a.createElement(o.d,null,r.a.createElement(o.b,{path:z.d,exact:!0,component:ne}),r.a.createElement(o.b,{path:z.f,exact:!0,component:fe}),r.a.createElement(o.b,{path:z.g,exact:!0,render:e(r.a.createElement(Ne,null))}),r.a.createElement(o.b,{path:z.h,exact:!0,render:e(r.a.createElement(Ce,null))}),r.a.createElement(o.b,{path:z.e,exact:!0,render:e(r.a.createElement(Ce,null))}),r.a.createElement(o.b,{path:"/PostPage",exact:!0,render:e(r.a.createElement(_e,null))}),r.a.createElement(o.b,{path:z.c,exact:!0,render:e(r.a.createElement(Ae,null))}),r.a.createElement(o.b,{path:"/testApp",exact:!0,component:Ie}),r.a.createElement(o.a,{to:z.a})))})),De=Object(o.h)(Re),Ge=n(3),Fe=n.n(Ge),Pe=n(99),Le=n(4),He=n(384),Me=Fe.a.mark(Ue),ze=Fe.a.mark(Be);function Ue(e){var t,n,a,r,c,o,u,i,s;return Fe.a.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return l.prev=0,l.next=3,Object(Le.d)(b(!0));case 3:return l.next=5,j.getMyInfo().exec();case 5:if(-1!=(t=l.sent).data.code){l.next=14;break}return V.a.warn("\u8eab\u4efd\u8ba4\u8bc1\u5df2\u7ecf\u8fc7\u671f\uff0c\u8bf7\u91cd\u65b0\u767b\u5f55\uff01"),l.next=10,Object(Le.d)({type:"LOGOUT"});case 10:return l.next=12,pn.push(z.d);case 12:l.next=37;break;case 14:return l.next=16,k.getManage().exec();case 16:return a=l.sent,r=t.data.data,c=a.data.data,o=g(Object(le.i)(r)),l.next=22,P.countAllUnchecked(r.id).exec();case 22:return u=l.sent,i=c.map((function(e){return Object(le.b)(e)})),s={type:"MANAGE_CATEGORIES_FETCHED",data:i},l.next=27,Object(Le.d)(o);case 27:return l.next=29,Object(Le.d)(s);case 29:return l.next=31,(!!e.isFirstTime||!!e.title)&&He.a.success({message:null!==(n=e.title)&&void 0!==n?n:"\u767b\u9646\u6210\u529f",description:"".concat(r.username,"\uff0c\u6b22\u8fce\u56de\u6765\uff01")});case 31:return l.next=33,Object(Le.d)({type:"INBOX_COUNT_FETCHED",count:u.data.data});case 33:return l.next=35,Object(Le.d)(O(r.id,Object(le.i)(r)));case 35:return l.next=37,!!e.redirect&&pn.push(e.redirect);case 37:l.next=42;break;case 39:l.prev=39,l.t0=l.catch(0),console.log(l.t0);case 42:return l.prev=42,l.next=45,Object(Le.d)(b(!1));case 45:return l.finish(42);case 46:case"end":return l.stop()}}),Me,null,[[0,39,42,46]])}function Be(){return Fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Le.e)(f.h,Ue);case 2:case"end":return e.stop()}}),ze)}var Ve=Be,Ye=Fe.a.mark(Qe),qe=Fe.a.mark(Je);function Qe(e){var t,n,a,r;return Fe.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,t=e.username,n=e.password,c.next=4,o={username:t,password:n},j.login(o).exec();case 4:if(a=c.sent,1!==(r=a.data).code){c.next=13;break}return c.next=9,Object(Le.d)(E(r.data));case 9:return c.next=11,Object(Le.d)(f.t(z.g,!0));case 11:c.next=15;break;case 13:return c.next=15,V.a.error("[code=".concat(r.code,"] ").concat(r.msg));case 15:c.next=21;break;case 17:c.prev=17,c.t0=c.catch(0),console.log(c.t0),V.a.error(c.t0.toString());case 21:case"end":return c.stop()}var o}),Ye,null,[[0,17]])}function Je(){return Fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Le.e)(f.j,Qe);case 2:case"end":return e.stop()}}),qe)}var We=Je,Xe=Fe.a.mark(Ze),$e=Fe.a.mark(Ke);function Ze(e){var t,n,a,r,c,o,u;return Fe.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,Object(Le.d)({type:"PROCESS_STARTED"});case 3:return n=null!==(t=e.cb)&&void 0!==t?t:function(){},i.next=6,j.register(e.form).exec();case 6:if(a=i.sent,console.log(a),0!==(r=a.data).code&&1!==r.code){i.next=17;break}return c=e.form,o=c.username,u=c.password,i.next=13,Object(Le.d)({type:"REGISTER_FORM_FILLED",value:{username:o,password:u}});case 13:return i.next=15,n();case 15:i.next=18;break;case 17:V.a.warn(r.msg);case 18:i.next=23;break;case 20:i.prev=20,i.t0=i.catch(0),V.a.error(i.t0.toString());case 23:return i.prev=23,i.next=26,Object(Le.d)({type:"PROCESS_HANDLED"});case 26:return i.finish(23);case 27:case"end":return i.stop()}}),Xe,null,[[0,20,23,27]])}function Ke(){return Fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Le.e)(f.k,Ze);case 2:case"end":return e.stop()}}),$e)}var et=Ke,tt=Fe.a.mark(at),nt=Fe.a.mark(rt);function at(e){var t,n,a;return Fe.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=null!==(t=e.cb)&&void 0!==t?t:function(){},r.prev=1,r.next=4,Object(Le.d)({type:"PROCESS_STARTED"});case 4:return r.next=6,j.update(e.data).exec();case 6:if(!((a=r.sent).data.code<0)){r.next=12;break}return r.next=10,V.a.warn(a.data.msg);case 10:r.next=16;break;case 12:return r.next=14,V.a.success("\u64cd\u4f5c\u5df2\u6210\u529f\uff01");case 14:return r.next=16,Object(Le.d)(f.t());case 16:r.next=21;break;case 18:r.prev=18,r.t0=r.catch(1),V.a.error(r.t0.toString());case 21:return r.prev=21,r.next=24,Object(Le.d)({type:"PROCESS_HANDLED"});case 24:return r.next=26,n();case 26:return r.finish(21);case 27:case"end":return r.stop()}}),tt,null,[[1,18,21,27]])}function rt(){return Fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Le.e)(f.l,at);case 2:case"end":return e.stop()}}),nt)}var ct=rt,ot=n(28),ut=Fe.a.mark(st),it=Fe.a.mark(lt);function st(e){var t,n,a,r;return Fe.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,c.next=3,Object(Le.d)({type:"PROCESS_STARTED"});case 3:return c.next=5,P.myInbox(e.uid.toString()).exec();case 5:if(t=c.sent,console.log(t),!(t.data.code>=0)){c.next=29;break}return c.next=10,Object(Le.d)({type:"MY_INBOX_FETCHED",data:t.data.data});case 10:n=Object(ot.a)(t.data.data),c.prev=11,n.s();case 13:if((a=n.n()).done){c.next=19;break}return r=a.value,c.next=17,(null===r||void 0===r?void 0:r.senderId)&&Object(Le.d)(f.u(r.senderId));case 17:c.next=13;break;case 19:c.next=24;break;case 21:c.prev=21,c.t0=c.catch(11),n.e(c.t0);case 24:return c.prev=24,n.f(),c.finish(24);case 27:c.next=31;break;case 29:return c.next=31,V.a.warn(t.msg);case 31:c.next=37;break;case 33:return c.prev=33,c.t1=c.catch(0),c.next=37,V.a.error(c.t1.toString());case 37:return c.prev=37,c.next=40,Object(Le.d)({type:"PROCESS_HANDLED"});case 40:return c.finish(37);case 41:case"end":return c.stop()}}),ut,null,[[0,33,37,41],[11,21,24,27]])}function lt(){return Fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Le.e)(f.g,st);case 2:case"end":return e.stop()}}),it)}var dt=lt,mt=Fe.a.mark(pt),ft=Fe.a.mark(vt);function pt(){var e;return Fe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(Le.d)({type:"PROCESS_STARTED"});case 3:return t.next=5,R.myFavorite().exec();case 5:if(!((e=t.sent).data.code<0)){t.next=11;break}return t.next=9,V.a.warn(e.data.msg);case 9:t.next=13;break;case 11:return t.next=13,Object(Le.d)({type:"MY_FAVORITE_FETCHED",data:e.data.data});case 13:t.next=19;break;case 15:return t.prev=15,t.t0=t.catch(0),t.next=19,V.a.error(t.t0.toString());case 19:return t.prev=19,t.next=22,Object(Le.d)({type:"PROCESS_HANDLED"});case 22:return t.finish(19);case 23:case"end":return t.stop()}}),mt,null,[[0,15,19,23]])}function vt(){return Fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Le.e)(f.f,pt);case 2:case"end":return e.stop()}}),ft)}var Et=vt,ht=Fe.a.mark(gt),bt=Fe.a.mark(Ot);function gt(e){var t;return Fe.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Object(Le.d)({type:"PROCESS_STARTED"});case 3:return n.next=5,R.deleteFavorite(e.fid.toString()).exec();case 5:if(!((t=n.sent).data.code<0)){n.next=11;break}return n.next=9,V.a.warn(t.data.msg);case 9:n.next=15;break;case 11:return n.next=13,V.a.success("\u5220\u9664\u6210\u529f\uff01");case 13:return n.next=15,Object(Le.d)(f.r());case 15:n.next=21;break;case 17:return n.prev=17,n.t0=n.catch(0),n.next=21,V.a.error(n.t0.toString());case 21:return n.prev=21,n.next=24,Object(Le.d)({type:"PROCESS_HANDLED"});case 24:return n.finish(21);case 25:case"end":return n.stop()}}),ht,null,[[0,17,21,25]])}function Ot(){return Fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Le.e)(f.a,gt);case 2:case"end":return e.stop()}}),bt)}var xt=[Ve,We,et,ct,dt,Et,Ot],wt=Fe.a.mark(Tt),yt=Fe.a.mark(kt);function Tt(e){var t,n;return Fe.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(Le.d)({type:"PROCESS_STARTED"});case 2:return n=null!==(t=e.handler)&&void 0!==t?t:function(){},a.next=5,Object(Le.c)(e.time);case 5:return a.next=7,n();case 7:return a.next=9,Object(Le.d)({type:"PROCESS_HANDLED"});case 9:case"end":return a.stop()}}),wt)}function kt(){return Fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Le.e)(f.m,Tt);case 2:case"end":return e.stop()}}),yt)}var jt=kt,St=Fe.a.mark(Nt),It=Fe.a.mark(Ct);function Nt(e){var t,n,a,r,c,o;return Fe.a.wrap((function(u){for(;;)switch(u.prev=u.next){case 0:return u.prev=0,u.next=3,Object(Le.d)({type:"PROCESS_STARTED"});case 3:return u.next=5,j.getInfoById(e.uid.toString()).exec();case 5:return n=u.sent,u.next=8,k.getManage(e.uid.toString()).exec();case 8:if(a=u.sent,r=n.data,c=(null!==(t=a.data.data)&&void 0!==t?t:[]).length,console.log(r),!(r.code>=0)){u.next=21;break}return u.next=15,Object(le.i)(r.data);case 15:return o=u.sent,console.log(o),u.next=19,Object(Le.d)(O(e.uid,Object(p.a)({},o,{manageCateId:c})));case 19:u.next=24;break;case 21:return u.next=23,V.a.warn(r.msg);case 23:pn.push(z.a);case 24:u.next=31;break;case 26:return u.prev=26,u.t0=u.catch(0),u.next=30,V.a.error(u.t0.toString());case 30:pn.push(z.a);case 31:return u.prev=31,u.next=34,Object(Le.d)({type:"PROCESS_HANDLED"});case 34:return u.finish(31);case 35:case"end":return u.stop()}}),St,null,[[0,26,31,35]])}function Ct(){return Fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Le.e)(f.i,Nt);case 2:case"end":return e.stop()}}),It)}var _t=[jt,Ct],At=Fe.a.mark(Dt),Rt=Fe.a.mark(Gt);function Dt(){var e,t,n,a,r,c,o,u,i,s;return Fe.a.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return l.prev=0,l.next=3,Object(Le.d)(f.o());case 3:return l.next=5,C.top10ByVisitsCount().exec();case 5:return e=l.sent,l.next=8,C.top10ByReplyCount().exec();case 8:if(t=l.sent,!(e.data.code<0||t.data.code<0)){l.next=14;break}V.a.warn(e.data.msg),V.a.warn(t.data.msg),l.next=51;break;case 14:n=[],a=[],r=Object(ot.a)(e.data.data),l.prev=16,r.s();case 18:if((c=r.n()).done){l.next=25;break}return o=c.value,n.push(Object(le.g)(o)),l.next=23,Object(Le.d)(f.u(o.creatorId));case 23:l.next=18;break;case 25:l.next=30;break;case 27:l.prev=27,l.t0=l.catch(16),r.e(l.t0);case 30:return l.prev=30,r.f(),l.finish(30);case 33:u=Object(ot.a)(t.data.data),l.prev=34,u.s();case 36:if((i=u.n()).done){l.next=43;break}return s=i.value,a.push(Object(le.g)(s)),l.next=41,Object(Le.d)(f.u(s.creatorId));case 41:l.next=36;break;case 43:l.next=48;break;case 45:l.prev=45,l.t1=l.catch(34),u.e(l.t1);case 48:return l.prev=48,u.f(),l.finish(48);case 51:l.next=58;break;case 53:return l.prev=53,l.t2=l.catch(0),l.next=57,V.a.error(l.t2.toString());case 57:pn.push(z.a);case 58:return l.prev=58,l.next=61,Object(Le.d)({type:"HOMEPAGE_IS_LOADED",on:!0});case 61:return l.finish(58);case 62:case"end":return l.stop()}}),At,null,[[0,53,58,62],[16,27,30,33],[34,45,48,51]])}function Gt(){return Fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Le.e)(f.e,Dt);case 2:case"end":return e.stop()}}),Rt)}var Ft=Gt,Pt=Fe.a.mark(Ht),Lt=Fe.a.mark(Mt);function Ht(){var e,t,n,a,r,c;return Fe.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,o.next=3,k.getAll().exec();case 3:if(!((e=o.sent).data.code<0)){o.next=9;break}return o.next=7,V.a.warn(e.data.msg);case 7:o.next=15;break;case 9:t=e.data.data,n=[],a=Object(ot.a)(t);try{for(a.s();!(r=a.n()).done;)c=r.value,n.push(Object(le.b)(c))}catch(u){a.e(u)}finally{a.f()}return o.next=15,Object(Le.d)(x(n));case 15:o.next=22;break;case 17:return o.prev=17,o.t0=o.catch(0),o.next=21,V.a.error(o.t0.toString());case 21:pn.push(z.a);case 22:case"end":return o.stop()}}),Pt,null,[[0,17]])}function Mt(){return Fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Le.e)(f.c,Ht);case 2:case"end":return e.stop()}}),Lt)}var zt=Mt,Ut=Fe.a.mark(Vt),Bt=Fe.a.mark(Yt);function Vt(e){var t,n,a,r,c,o;return Fe.a.wrap((function(u){for(;;)switch(u.prev=u.next){case 0:return u.prev=0,u.next=3,C.all(e.cid.toString()).exec();case 3:if(!((t=u.sent).data.code<0)){u.next=9;break}return u.next=7,V.a.warn(t.data.msg);case 7:u.next=13;break;case 9:n=t.data.data,a=[],r=Object(ot.a)(n);try{for(r.s();!(c=r.n()).done;)o=c.value,a.push(Object(le.g)(o))}catch(i){r.e(i)}finally{r.f()}case 13:u.next=20;break;case 15:return u.prev=15,u.t0=u.catch(0),u.next=19,V.a.error(u.t0.toString());case 19:pn.push(z.a);case 20:case"end":return u.stop()}}),Ut,null,[[0,15]])}function Yt(){return Fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Le.e)(f.b,Vt);case 2:case"end":return e.stop()}}),Bt)}var qt=Yt,Qt=Fe.a.mark($t),Jt=Fe.a.mark(Zt);function Wt(e,t){var n,a=[],r=Object(ot.a)(e.data);try{for(r.s();!(n=r.n()).done;){var c=n.value;a.push(Object(le.g)(c)),t.push(f.u(c.creatorId))}}catch(o){r.e(o)}finally{r.f()}return a}function Xt(e,t){var n,a=[],r=Object(ot.a)(e.data);try{for(r.s();!(n=r.n()).done;){var c=n.value;a.push(Object(le.f)(c)),t.push(f.u(c.creatorId))}}catch(o){r.e(o)}finally{r.f()}return a}function $t(e){var t,n,a,r,c,o,u,i,s,l,d,m,f,p,v,E,h;return Fe.a.wrap((function(b){for(;;)switch(b.prev=b.next){case 0:return b.prev=0,t=e.cateId.toString(),n=[],a=0,b.next=5,C.all(t).exec();case 5:return n[0]=b.sent,b.next=8,k.getInfoById(t).exec();case 8:return n[1]=b.sent,b.next=11,C.top(t).exec();case 11:return n[2]=b.sent,b.next=14,C.highQuality(t).exec();case 14:return n[3]=b.sent,b.next=17,I.all(t).exec();case 17:return n[4]=b.sent,b.next=20,C.tag().exec();case 20:for(n[5]=b.sent,r=0,c=n;r<c.length;r++)(o=c[r]).data.code<0&&(V.a.warn(o.data.msg),++a);if(a){b.next=51;break}u=[],i=Wt(n[0].data,u),s=Object(le.b)(n[1].data.data),l=Wt(n[2].data,u),d=Wt(n[3].data,u),m=Xt(n[4].data,u),f=n[5].data.data,p=Object(le.h)(u),console.log(u,p,n),v=Object(ot.a)(p),b.prev=33,v.s();case 35:if((E=v.n()).done){b.next=41;break}return h=E.value,b.next=39,Object(Le.d)(h);case 39:b.next=35;break;case 41:b.next=46;break;case 43:b.prev=43,b.t0=b.catch(33),v.e(b.t0);case 46:return b.prev=46,v.f(),b.finish(46);case 49:return b.next=51,Object(Le.d)(w(s,d,l,i,m,f));case 51:b.next=58;break;case 53:return b.prev=53,b.t1=b.catch(0),b.next=57,V.a.error(b.t1.toString());case 57:pn.push(z.a);case 58:case"end":return b.stop()}}),Qt,null,[[0,53],[33,43,46,49]])}function Zt(){return Fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Le.e)(f.d,$t);case 2:case"end":return e.stop()}}),Jt)}var Kt=[Ft,zt,Zt,qt],en=Fe.a.mark(nn),tn=[].concat(Object(Pe.a)(xt),Object(Pe.a)(_t),Object(Pe.a)(Kt));function nn(){return Fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Le.a)(tn.map((function(e){return Object(Le.b)(e)})));case 2:case"end":return e.stop()}}),en)}var an,rn=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=t?sessionStorage:localStorage;n.setItem(v.k.token,e),n.setItem(v.k.tokenSetTime,Date.now().toString())},cn=function(e){var t=v.k.token,n=v.k.tokenSetTime;if(e.hasOwnProperty(t)&&e.hasOwnProperty(n)){var a,r=parseInt(null!==(a=e.getItem(n))&&void 0!==a?a:"0");return Date.now()-r<=v.l}return!1},on=function(){sessionStorage.removeItem(v.k.token),localStorage.removeItem(v.k.token)},un={token:null!==(an=cn(sessionStorage)?sessionStorage.getItem(v.k.token):cn(localStorage)?localStorage.getItem(v.k.token):null)&&void 0!==an?an:"",info:{},isLoading:!1,sysMsg:[],success:!1,manageCate:[],inbox:0,mails:[],favorites:[]};var sn={favicon:v.f,text:{type:"Plain",content:"\u5e76\u4e0d\u662f\u604b\u4e0a\u4e86\uff0c\u53ea\u662f\uff0c\n\u4e0d\u53ef\u6297\u62d2\u5730\uff0c\u88ab\u5438\u5f15\u4e86\u3002",footer:"\u300c\u604b \xd7 \u30b7\u30f3\u30a2\u30a4\u5f7c\u5973\u300d"},categories:[],newTheme:[],newReply:[],announcement:[],lastUpdate:Date.now(),hasLoaded:!1};var ln={inProcess:!1,userCenter:[]};var dn={regForm:{}};var mn={info:{},highQuality:[],pinned:[],all:[],announce:[],tags:[],loaded:null};var fn=Object(i.combineReducers)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:un,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN":var n=t.token;return rn(n),Object(p.a)({},e,{token:n});case"LOGOUT":return on(),Object(p.a)({},un,{token:""});case"MY_INFO_FETCHED":var a=t.data;return Object(p.a)({},e,{info:a});case"TOGGLE_USER_LOADING":var r=t.on;return Object(p.a)({},e,{isLoading:r});case"INBOX_COUNT_FETCHED":return Object(p.a)({},e,{inbox:t.count});case"MY_INBOX_FETCHED":return Object(p.a)({},e,{mails:t.data});case"MY_FAVORITE_FETCHED":return Object(p.a)({},e,{favorites:t.data});case"MY_MESSAGE_FETCHED":return Object(p.a)({},e,{sysMsg:t.msg})}return e},homepage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:sn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"RECOMMEND_FETCHED":var n=t.newTheme,a=t.newReply;return Object(p.a)({},e,{newTheme:n,newReply:a});case"HOME_PAGE_FETCHED":return Object(p.a)({},e,{newTheme:t.newTheme,newReply:t.newReply});case"CATEGORIES_FETCHED":return Object(p.a)({},e,{categories:t.data});case"HOMEPAGE_IS_LOADED":return Object(p.a)({},e,{hasLoaded:t.on})}return e},component:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ln,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"PROCESS_HANDLED":return Object(p.a)({},e,{inProcess:!1});case"PROCESS_STARTED":return Object(p.a)({},e,{inProcess:!0});case"USER_INFO_FETCHED":var n=e.userCenter;return n[t.id]=t.data,Object(p.a)({},e,{userCenter:n})}return e},view:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:dn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REGISTER_FORM_FILLED":return Object(p.a)({},e,{regForm:t.value})}return e},category:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CATEGORY_DETAILS_FETCHED":var n=t.info,a=t.highQuality,r=t.pinned,c=t.announce,o=t.all,u=t.tags,i=n._id;return Object(p.a)({},e,{info:n,highQuality:a,pinned:r,announce:c,all:o,tags:u,loaded:i})}return e}}),pn={push:function(e){vn.push(e),console.log(vn),document.documentElement.scrollTop=0,document.body.scrollTop=0,window.scrollTo(0,0)},$push:function(e,t){return vn.push(e,t)}},vn=Object(c.a)(),En=Object(s.a)(),hn=[En],bn=i.applyMiddleware.apply(void 0,hn),gn=bn,On=Object(i.createStore)(fn,gn);En.run(nn),On.subscribe((function(){return!!On.getState().user.token&&d.a.interceptors.request.use((function(e){var t;return e.headers.Authorization=null!==(t=On.getState().user.token)&&void 0!==t?t:void 0,e}),(function(e){return Promise.reject(e)}))})),d.a.defaults.withCredentials=!0;var xn=Object(a.memo)((function(){return Object(a.useEffect)((function(){n.e(12).then(n.bind(null,494)).then((function(e){return(0,e.statement)()}))}),[]),r.a.createElement(u.a,{store:On},r.a.createElement(o.c,{history:vn},r.a.createElement(De,null)))}));t.b=xn}},[[209,3,4]]]);
//# sourceMappingURL=main.444ca3a3.chunk.js.map