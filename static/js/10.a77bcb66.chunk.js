(this["webpackJsonpminazuki-bbs"]=this["webpackJsonpminazuki-bbs"]||[]).push([[10],{429:function(e,a,t){},430:function(e,a,t){e.exports=t.p+"static/media/bg-ayane.029bf6de.png"},431:function(e,a,t){},502:function(e,a,t){"use strict";t.r(a);var n=t(44),c=t(24),r=t(9),l=t(51),i=t(0),s=t.n(i),m=(t(429),t(10)),o=t(373),u=t(370),d=t(375),v=t(510),E=t(497),f=t(503),b=t(369),p=t(108),g=t(186),h=t(509),N=t(508),O=t(507),k=t(506),j=t(430),x=t.n(j),y=t(124),I=t(132),C=t(22),w=t(119),F=t(7),S=t(123),z=t(15),P=t(196),A=(t(431),t(383)),_=["/","/message","/theme","/reply","/favorite"],q=["\u9996\u9875","\u6d88\u606f","\u4e3b\u9898","\u56de\u590d","\u6536\u85cf"],D=Object(i.memo)((function(e){var a;return Object(i.useEffect)((function(){e.refresh()}),[]),s.a.createElement("div",{className:"tab-message",style:null!==(a=e.style)&&void 0!==a?a:{}},JSON.stringify(e.inbox))})),J=Object(i.memo)((function(e){return s.a.createElement("div",{className:"tab-favorite"})})),U=Object(i.memo)((function(e){var a=e.className,t=e.user,n=e.callbacks,c=e.inProcess,r={visibility:"hidden"},l=function(e){for(var a=e.match.path,l=_.indexOf(a),i=[],m=[-28,0],o=0;o<5;++o)1===o?i.push(s.a.createElement(A.a,{count:t.inbox,offset:m,key:o},s.a.createElement(P.b,{to:_[o],className:"nav-item"+(o===l?" selected":"")},q[o]))):i.push(s.a.createElement(A.a,{count:0,offset:m,key:o},s.a.createElement(P.b,{to:_[o],className:"nav-item"+(o===l?" selected":"")},q[o])));return s.a.createElement(w.a,null,s.a.createElement("div",{className:"card-container"},s.a.createElement("div",{className:"nav-bar"},i),s.a.createElement(D,{refresh:n.inbox,style:1===l?{}:r,inbox:t.mails,inProcess:c}),s.a.createElement(J,{refresh:n.favorite,style:4===l?{}:r,fav:t.favorites,inProcess:c,$delete:n.delFav})))};return s.a.createElement("div",{id:"comp-user-center-view",className:a},s.a.createElement(P.a,null,s.a.createElement(C.d,null,s.a.createElement(C.b,{path:"/",exact:!0,render:l}),s.a.createElement(C.b,{path:"/message",exact:!0,render:l}),s.a.createElement(C.b,{path:"/theme",exact:!0,render:l}),s.a.createElement(C.b,{path:"/reply",exact:!0,render:l}),s.a.createElement(C.b,{path:"/favorite",exact:!0,render:l}),s.a.createElement(C.a,{from:"/*",to:"/"}))))})),B=Object(i.memo)((function(e){var a=e.title,t=e.content;return s.a.createElement("div",{className:"inner-item"},s.a.createElement("div",{className:"inner-title"},a),s.a.createElement("div",{className:"inner-content"},t))})),T=Object(i.memo)((function(e){var a,t=Object(l.a)(e.form,1)[0],n=e.cb,c=e.user,m=c.username,g=c.nickname,h=c.signature,N=c.privacyShow,O=null!==(a=c.avatar)&&void 0!==a?a:F.e,k=Object(i.useState)(!1),j=Object(l.a)(k,2),x=j[0],y=j[1],I=Object(i.useState)(O),C=Object(l.a)(I,2),S=C[0],P=C[1],A=Object(i.useState)(!1),_=Object(l.a)(A,2),q=_[0],D=_[1],J=function(){return q?Object(z.d)(S):S};return s.a.createElement(w.a,{className:"edit-card"},s.a.createElement("div",{className:"card-container"},s.a.createElement("div",{className:"form-container"},s.a.createElement(o.a,Object.assign({form:t,onFinish:function(e){return n(Object(r.a)({},e,{avatarUrl:J()}))},className:"form"},{labelCol:{span:6},wrapperCol:{span:16}},{size:"large",initialValues:{username:m,nickname:g,signature:h,privacyShow:N},onFinishFailed:function(){return u.a.info("\u8868\u5355\u4fe1\u606f\u9a8c\u8bc1\u5931\u8d25\uff0c\u8bf7\u91cd\u8bd5\uff01")}}),s.a.createElement(o.a.Item,{name:"username",label:"\u7528\u6237\u540d"},s.a.createElement(d.a,{disabled:!0})),s.a.createElement(o.a.Item,{name:"nickname",label:"\u6635\u79f0",rules:[{required:!0,message:"\u6635\u79f0\u4e0d\u80fd\u4e3a\u7a7a"}]},s.a.createElement(d.a,null)),s.a.createElement(o.a.Item,{name:"signature",label:"\u4e2a\u6027\u7b7e\u540d"},s.a.createElement(d.a,null)),s.a.createElement(o.a.Item,{name:"privacyShow",label:"\u663e\u793a\u8d44\u6599",valuePropName:"checked"},s.a.createElement(v.a,null)),s.a.createElement(o.a.Item,{name:"avatar"},s.a.createElement(E.a,{title:"\u66f4\u6362\u5934\u50cf",visible:x,onCancel:function(){y(!1),P(O),D(!1)},onOk:function(){return y(!1)},okText:"\u6682\u5b58\u4fee\u6539",cancelText:"\u53d6\u6d88\u5e76\u8fd8\u539f\u4fee\u6539"},s.a.createElement("div",{style:{margin:"10px 0"}},"\u8bf7\u8f93\u5165\u5934\u50cf\u7684 URL \u5730\u5740\uff0c\u5b83\u9700\u8981\u5141\u8bb8\u672c\u7ad9\u7684\u8bbf\u95ee\uff1a"),s.a.createElement(d.a,{onChange:function(e){return P(e.target.value)},value:S}),s.a.createElement(f.a,{checked:q,style:{margin:"10px 0"},onChange:function(e){return D(!q)}},"\u4f7f\u7528 Gravatar \uff08\u9700\u8981\u63d0\u4f9b\u7535\u5b50\u90ae\u4ef6\u5730\u5740\uff09"),s.a.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"}},s.a.createElement("div",{style:{width:"100%",margin:"10px 0"}},"\u9884\u89c8\u56fe\uff1a"),s.a.createElement(b.a,{src:J(),shape:"square",size:180})))))),s.a.createElement("div",{className:"avatar-container"},s.a.createElement(b.a,{src:J(),shape:"square",size:240}),s.a.createElement(p.a,{shape:"round",onClick:function(){return y(!0)},size:"large",className:"edit-avatar"},"\u7f16\u8f91"))))})),G=Object(i.memo)((function(e){var a,t,n=e.user,c=e.loggedIn,d=e.getById,v=e.lib,E=e.updateInfo,f=e.inProcess,j=e.fetchInbox,P=e.fetchFavorite,A=e.deleteFavorite,_=Object(i.useContext)(I.a),q=Object(C.g)(),D=!_.match.params.uid||_.match.params.uid===n.info._id,J=null!==(a=_.match.params.uid)&&void 0!==a?a:n.info._id,G=Object(i.useState)(!1),L=Object(l.a)(G,2),R=L[0],V=L[1],Z=o.a.useForm(),$=Object(l.a)(Z,1)[0],H={inbox:function(){j(n.info._id)},favorite:function(){P()},delFav:function(e){A(e)}};Object(i.useEffect)((function(){console.log(J),K(J,c),console.log(v[J]),D||v[J]||d(J)}),[]);var K=function(e,a){if(e&&/[a-zA-Z_]/.test(e))u.a.info("UID: ".concat(e," \u683c\u5f0f\u4e0d\u6b63\u786e\uff0c\u5c06\u56de\u5230\u4e3b\u9875\uff01")),q.push(m.g);else{if(void 0!==e||a)return;u.a.info("\u60a8\u8fd8\u6ca1\u6709\u767b\u5f55\uff0c\u5c06\u8df3\u8f6c\u767b\u9646\u9875\u9762\uff01"),q.push(m.d)}},M=function(e){var a;return null!==(a=v[e])&&void 0!==a?a:{avatar:F.e,nickname:"\u52a0\u8f7d\u4e2d\u2026\u2026",isAdmin:!1,manageCateId:null!==J&&void 0!==J?J:0,createdAt:"\u52a0\u8f7d\u4e2d\u2026\u2026",lastSignIn:"\u52a0\u8f7d\u4e2d\u2026\u2026",signature:"\u52a0\u8f7d\u4e2d\u2026\u2026",username:"\u52a0\u8f7d\u4e2d\u2026\u2026",_id:0}},Q=D||n.info.isAdmin?s.a.createElement(p.a,{className:"button",shape:"round",onClick:function(){R?$.submit():V(!R)}},R?f?s.a.createElement(g.a,null):s.a.createElement(h.a,null):s.a.createElement(N.a,null),R?"\u4fdd\u5b58\u4fee\u6539":"\u7f16\u8f91\u4fe1\u606f"):s.a.createElement(p.a,{className:"button",shape:"round",onClick:function(){},disabled:!0,title:"\u529f\u80fd\u5f00\u53d1\u4e2d"},s.a.createElement(O.a,null)," \u53d1\u9001\u79c1\u4fe1");return s.a.createElement("div",{id:"page-user",className:"page"},s.a.createElement(y.a,{src:x.a}),s.a.createElement("div",{className:"container"},s.a.createElement("div",{className:"upper-block"},s.a.createElement(w.a,null,s.a.createElement("div",{className:"card-container"},s.a.createElement("div",{className:"standard-info"},s.a.createElement(b.a,{src:null!==(t=M(J).avatar)&&void 0!==t?t:F.e,size:64,className:"avatar"}),s.a.createElement("div",{className:"text-field"},s.a.createElement("div",{className:"main-text"},s.a.createElement("div",{className:"nickname"},M(J).nickname),s.a.createElement("div",{className:"tags"},S.b[Object(z.a)(M(J))]),s.a.createElement("div",{className:"username"},"\u7528\u6237\u540d\uff1a ",M(J).username)),s.a.createElement("div",{className:"sign-text"},M(J).signature?M(J).signature:F.g))),s.a.createElement("div",{className:"buttons-group"},Q)))),s.a.createElement("div",{className:"lower-block"},R?s.a.createElement(T,{form:[$],cb:function(e){var a=Object(r.a)({},e,{id:J});e.nickname===M(J).nickname&&(a.nickname=null),E(a,(function(){return V(!1)}))},user:n.info}):s.a.createElement(s.a.Fragment,null,s.a.createElement(U,{className:"center-view",user:n,callbacks:H,inProcess:f}),s.a.createElement(w.a,{className:"standard-info"},s.a.createElement("div",null,s.a.createElement("div",{className:"main-title"},"\u4e2a\u4eba\u57fa\u672c\u4fe1\u606f"),s.a.createElement("div",{className:"list-content"},s.a.createElement(B,{title:"\u7528\u6237\u540d",content:M(J).username}),s.a.createElement(B,{title:"\u7528\u6237 ID",content:M(J)._id.toString()}),s.a.createElement(B,{title:"\u6ce8\u518c\u65e5\u671f",content:M(J).createdAt}),s.a.createElement(B,{title:"\u6700\u540e\u767b\u5f55",content:M(J).lastSignIn})),s.a.createElement("div",{className:"wrapper"},s.a.createElement(p.a,{title:"\u8fdb\u884c\u4e3b\u9898\u5e16\uff0c\u56de\u590d\u7b49\u7ba1\u7406",shape:"round",className:"goto-manage",size:"large",onClick:function(){}},s.a.createElement(k.a,null),"\u7ba1\u7406\u5165\u53e3"))))))))})),L=t(6);a.default=Object(n.b)((function(e){var a=e.user,t=e.component,n=t.userCenter,c=t.inProcess;return{loggedIn:!!a.token,user:a,lib:n,inProcess:c}}),(function(e){return Object(c.bindActionCreators)({getById:L.u,updateInfo:L.x,fetchInbox:L.s,fetchFavorite:L.r,deleteFavorite:L.n},e)}))(G)}}]);
//# sourceMappingURL=10.a77bcb66.chunk.js.map